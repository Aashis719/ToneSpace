<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    // ULTIMATE CONSOLE SILENCER - MUST BE THE VERY FIRST SCRIPT
    (function () {
      const originalWarn = console.warn;
      const originalError = console.error;
      const originalLog = console.log;

      const noisePatterns = [
        'cdn.tailwindcss.com',
        'AudioContext',
        'suspended',
        'resumed',
        'gesture on the page',
        'polyphony',
        'Tone.js',
        'Key',
        'exhausted',
        'Rotating',
        '429',
        'favicon',
        'generativelanguage',
        'POST',
        'fetch',
        'Models',
        'Analysis failed'
      ];

      const shouldSilence = (args) => {
        try {
          const msg = args.map(arg =>
            typeof arg === 'string' ? arg : JSON.stringify(arg)
          ).join(' ');
          return noisePatterns.some(pattern => msg.includes(pattern));
        } catch (e) {
          return false;
        }
      };

      console.warn = (...args) => { if (!shouldSilence(args)) originalWarn(...args); };
      console.log = (...args) => { if (!shouldSilence(args)) originalLog(...args); };
      console.error = (...args) => { if (!shouldSilence(args)) originalError(...args); };

      // Monkey-patch AudioContext to be silent about its state
      const OriginalAudioContext = window.AudioContext || window.webkitAudioContext;
      if (OriginalAudioContext) {
        const SilentAudioContext = function (...args) {
          const ctx = new OriginalAudioContext(...args);
          return ctx;
        };
        SilentAudioContext.prototype = OriginalAudioContext.prototype;
        // Note: We can't easily suppress the browser's own internal logging for the ctor,
        // but we can try to catch errors from it.
      }
    })();
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ToneSpace | Reflective Interface</title>
  <link rel="icon" type="image/png" href="/logoliving.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/index.css">
  <script type="importmap">
    {
      "imports": {
        "react/": "https://esm.sh/react@^19.2.3/",
        "react": "https://esm.sh/react@^19.2.3",
        "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
        "@google/genai": "https://esm.sh/@google/genai@^1.34.0",
        "tone": "https://esm.sh/tone@^15.0.4"
      }
    }
  </script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>

</html>